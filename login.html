<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - CTS E-Lost & Found</title>
<link rel="stylesheet" href="style.css">
<style>
/* Auth Form Styling same as before */
.auth-form { background: #fff; max-width: 420px; width: 100%; margin: 2rem auto; padding: 2rem; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); text-align: center; }
.auth-form h2 { margin-bottom: 0.5rem; font-size: 1.8rem; color: #222; }
.auth-form .tagline { margin-bottom: 1.5rem; font-size: 0.95rem; color: #666; }
.auth-form .form-group { margin-bottom: 1.2rem; text-align: left; }
.auth-form label { display: block; font-weight: bold; margin-bottom: 0.5rem; color: #333; }
.auth-form input { width: 100%; padding: 0.9rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; outline: none; transition: border-color 0.3s; }
.auth-form input:focus { border-color: #0077ff; box-shadow: 0 0 6px rgba(0,119,255,0.2); }
.auth-form .btn.primary { width: 100%; padding: 0.9rem; background: #0077ff; color: #fff; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: background 0.3s; }
.auth-form .btn.primary:hover { background: #005fcc; }
.auth-form .alt-link { margin-top: 1rem; font-size: 0.9rem; color: #555; }
.auth-form .alt-link a { color: #0077ff; text-decoration: none; font-weight: bold; }
.auth-form .alt-link a:hover { text-decoration: underline; }
</style>
</head>
<body>
<header>
  <div class="logo-title">
    <img src="images/logo.webp" alt="CTS Logo">
    <h1>CTS E-Lost & Found</h1>
  </div>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="search.html">Search Items</a></li>
      <li><a href="login.html" class="active">Login</a></li>
      <li><a href="register.html">Register</a></li>
    </ul>
  </nav>
</header>

<main class="container">
  <form id="loginForm" class="auth-form">
    <h2>Login to Your Account</h2>
    <p class="tagline">Welcome back! Please log in to continue.</p>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="Enter your email" required>
    </div>

    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" id="password" name="password" placeholder="Enter your password" required>
    </div>

    <button type="submit" class="btn primary">Login</button>
    <p class="alt-link">Don't have an account? <a href="register.html">Register here</a></p>
  </form>
</main>

<footer>
  <p>© 2025 CTS-C E-Lost & Found. All rights reserved.</p>
</footer>

<script>
const form = document.getElementById("loginForm");

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const email = form.email.value.trim();
  const password = form.password.value;

  try {
    const res = await fetch("http://localhost:5000/login", {  // your server.js login route
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });

    const data = await res.json();

    if (!res.ok) {
      alert("❌ " + data.error);
      return;
    }

    alert("✅ Login successful!");
    sessionStorage.setItem("token", data.token); // store JWT
    window.location.href = "dashboard.html";

  } catch (err) {
    console.error(err);
    alert("❌ Something went wrong. Please try again.");
  }
});
</script>
</body>
</html>
